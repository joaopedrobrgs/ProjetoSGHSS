{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-10-21T22:30:00.000Z",
  "__export_source": "insomnia.desktop.app:generated",
  "resources": [
    {
      "_id": "wrk_sghss",
      "_type": "workspace",
      "name": "SGHSS API",
      "scope": "collection"
    },
    {
      "_id": "env_sghss",
      "_type": "environment",
      "parentId": "wrk_sghss",
      "name": "Base Environment",
      "data": {
        "base_url": "https://localhost:7098",
        "jwt_token": "",
        "admin_email": "admin@sghss.local",
        "admin_senha": "Admin@123",
        "idPaciente": 1,
        "idProfissional": 1
      }
    },
    {
      "_id": "fld_auth",
      "_type": "request_group",
      "parentId": "wrk_sghss",
      "name": "Auth"
    },
    {
      "_id": "req_login",
      "_type": "request",
      "parentId": "fld_auth",
      "name": "Login",
      "description": "Autentica o usuário e retorna um JWT.\n\nBody:\n- email (string, obrigatório)\n- senha (string, obrigatório)\n\nRespostas:\n- 200 OK: { token, idUsuario, email, perfil }\n- 400/401: credenciais inválidas.",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/login",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"{{ admin_email }}\",\n  \"senha\": \"{{ admin_senha }}\"\n}"
      },
      "headers": [
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_register_paciente",
      "_type": "request",
      "parentId": "fld_auth",
      "name": "Register - Paciente",
      "description": "Cria usuário PACIENTE e retorna JWT.\n\nBody:\n- email, senha, perfil=PACIENTE\n- pacienteData: nomeCompleto, dataNascimento, cpf (somente dígitos), rg, sexo, [telefone], [endereco], [historicoClinico], [convenio], [emailPaciente]\n\nRegras:\n- CPF validado e único entre pacientes (409)\n- RG único entre pacientes (409)\n\nRespostas:\n- 200 OK: { token, idUsuario, email, perfil }\n- 400 CPF inválido | 409 duplicidade.",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/register",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"paciente1@sghss.local\",\n  \"senha\": \"Paciente@123\",\n  \"perfil\": \"PACIENTE\",\n  \"pacienteData\": {\n    \"nomeCompleto\": \"Paciente Um\",\n    \"dataNascimento\": \"2000-01-01\",\n    \"cpf\": \"12345678900\",\n    \"telefone\": \"11911111111\",\n    \"endereco\": \"Rua A, 100\",\n    \"historicoClinico\": \"N/A\",\n    \"rg\": \"1111111\",\n    \"sexo\": \"M\",\n    \"convenio\": \"Unimed\",\n    \"emailPaciente\": \"paciente1@dominio.com\"\n  }\n}"
      },
      "headers": [
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_register_profissional",
      "_type": "request",
      "parentId": "fld_auth",
      "name": "Register - Profissional",
      "description": "Cria usuário PROFISSIONAL e retorna JWT.\n\nBody:\n- email, senha, perfil=PROFISSIONAL\n- profissionalData: nomeCompleto, cpf, rg, crmOuConselho, especialidade, [telefone], [emailProfissional], [disponibilidadeAgenda]\n\nRegras:\n- CPF validado e único entre profissionais (409)\n- RG único entre profissionais (409)\n- CRM/Conselho único (409)\n\nRespostas:\n- 200 OK: { token, idUsuario, email, perfil }\n- 400 CPF inválido | 409 duplicidade.",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/register",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"pro1@sghss.local\",\n  \"senha\": \"Pro@123\",\n  \"perfil\": \"PROFISSIONAL\",\n  \"profissionalData\": {\n    \"nomeCompleto\": \"Dra. Ana\",\n    \"cpf\": \"98765432100\",\n    \"rg\": \"SP1234567\",\n    \"crmOuConselho\": \"CRM-9999\",\n    \"especialidade\": \"Clínico Geral\",\n    \"telefone\": \"11922222222\",\n    \"emailProfissional\": \"ana@clinic.com\",\n    \"disponibilidadeAgenda\": \"Seg-Sex 08-17h\"\n  }\n}"
      },
      "headers": [
        { "name": "Content-Type", "value": "application/json" }
      ]
    },

    {
      "_id": "fld_pacientes",
      "_type": "request_group",
      "parentId": "wrk_sghss",
      "name": "Pacientes"
    },
    {
      "_id": "req_pacientes_list",
      "_type": "request",
      "parentId": "fld_pacientes",
      "name": "GET /api/Pacientes",
      "description": "Lista pacientes.\n\nAuth: ADMIN ou PROFISSIONAL.\nRespostas:\n- 200 OK: array de pacientes com EmailUsuario e EmailPaciente.",
      "method": "GET",
      "url": "{{ base_url }}/api/Pacientes",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },
    {
      "_id": "req_pacientes_get",
      "_type": "request",
      "parentId": "fld_pacientes",
      "name": "GET /api/Pacientes/{id}",
      "description": "Detalha um paciente.\n\nAuth: ADMIN/PROFISSIONAL ou o próprio PACIENTE (se o IdUsuario corresponder).\nRespostas: 200 OK; 403/404 conforme regras.",
      "method": "GET",
  "url": "{{ base_url }}/api/Pacientes/{{ idPaciente }}",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },
    {
      "_id": "req_pacientes_put",
      "_type": "request",
      "parentId": "fld_pacientes",
      "name": "PUT /api/Pacientes/{id}",
  "description": "Atualiza dados do paciente.\n\nAuth: ADMIN pode atualizar qualquer; PROFISSIONAL pode atualizar apenas pacientes com RELAÇÃO ATIVA (tabela RelacoesProfissionalPaciente); PACIENTE atualiza os próprios dados (com restrições).\nObservação: a relação é criada/reativada automaticamente ao criar uma consulta entre o par.\nCampos aceitos: nomeCompleto, dataNascimento, cpf, telefone, endereco, historicoClinico (restrito), rg, sexo, convenio (restrito), emailPaciente.\nRegras: CPF válido e único entre pacientes (409); RG único entre pacientes (409).\nRespostas: 200 OK; 403/409/400/404 conforme regras.",
      "method": "PUT",
  "url": "{{ base_url }}/api/Pacientes/{{ idPaciente }}",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"nomeCompleto\": \"Paciente Um Atualizado\",\n  \"dataNascimento\": \"2000-01-01\",\n  \"cpf\": \"12345678900\",\n  \"telefone\": \"11911111112\",\n  \"endereco\": \"Rua A, 101\",\n  \"historicoClinico\": \"N/A\",\n  \"rg\": \"1111111\",\n  \"sexo\": \"M\",\n  \"convenio\": \"Unimed\",\n  \"emailPaciente\": \"paciente1.atualizado@dominio.com\"\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_pacientes_delete",
      "_type": "request",
      "parentId": "fld_pacientes",
      "name": "DELETE /api/Pacientes/{id}",
      "description": "Exclui paciente (cascade via usuário).\n\nAuth: ADMIN.\nRespostas: 204 No Content; 404 se não encontrado.",
      "method": "DELETE",
  "url": "{{ base_url }}/api/Pacientes/{{ idPaciente }}",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },

    {
      "_id": "fld_profissionais",
      "_type": "request_group",
      "parentId": "wrk_sghss",
      "name": "Profissionais"
    },
    {
      "_id": "req_profissionais_list",
      "_type": "request",
      "parentId": "fld_profissionais",
      "name": "GET /api/Profissionais",
      "description": "Lista profissionais.\n\nAuth: qualquer perfil autenticado.\nRespostas: 200 OK.",
      "method": "GET",
      "url": "{{ base_url }}/api/Profissionais",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },
    {
      "_id": "req_profissionais_get",
      "_type": "request",
      "parentId": "fld_profissionais",
      "name": "GET /api/Profissionais/{id}",
      "description": "Detalha um profissional.\n\nAuth: qualquer perfil autenticado.\nRespostas: 200 OK; 404 se não encontrado.",
      "method": "GET",
  "url": "{{ base_url }}/api/Profissionais/{{ idProfissional }}",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },
    {
      "_id": "req_profissionais_put",
      "_type": "request",
      "parentId": "fld_profissionais",
      "name": "PUT /api/Profissionais/{id}",
      "description": "Atualiza dados do profissional.\n\nAuth: ADMIN pode atualizar qualquer; PROFISSIONAL apenas o próprio.\nCampos aceitos: nomeCompleto, cpf, rg, crmOuConselho, especialidade, telefone, emailProfissional, disponibilidadeAgenda.\nRegras: CPF válido e único entre profissionais (409); RG único; CRM/Conselho único.\nRespostas: 200 OK; 403/409/400/404 conforme regras.",
      "method": "PUT",
  "url": "{{ base_url }}/api/Profissionais/{{ idProfissional }}",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"nomeCompleto\": \"Dra. Ana Medeiros\",\n  \"cpf\": \"98765432100\",\n  \"rg\": \"SP1234567\",\n  \"crmOuConselho\": \"CRM-9999\",\n  \"especialidade\": \"Clínico Geral\",\n  \"telefone\": \"11922223333\",\n  \"emailProfissional\": \"ana.m@clinic.com\",\n  \"disponibilidadeAgenda\": \"Seg-Sex 08-17h\"\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_profissionais_delete",
      "_type": "request",
      "parentId": "fld_profissionais",
      "name": "DELETE /api/Profissionais/{id}",
      "description": "Exclui profissional.\n\nAuth: ADMIN e apenas se não houver consultas vinculadas.\nRespostas: 204 No Content; 409 se houver consultas; 404 se não encontrado.",
      "method": "DELETE",
  "url": "{{ base_url }}/api/Profissionais/{{ idProfissional }}",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },

    {
      "_id": "fld_consultas",
      "_type": "request_group",
      "parentId": "wrk_sghss",
      "name": "Consultas"
    },
    {
      "_id": "req_consultas_create",
      "_type": "request",
      "parentId": "fld_consultas",
      "name": "POST /api/Consultas",
  "description": "Cria uma consulta.\n\nBody: idPaciente, idProfissional, dataHoraConsulta (ISO), tipoConsulta, [observacoes].\nRegras de permissão: PACIENTE agenda para si; PROFISSIONAL na própria agenda; ADMIN para qualquer.\nRespostas: 201 Created com consulta criada; 400/403/409 conforme regras.",
      "method": "POST",
      "url": "{{ base_url }}/api/Consultas",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"idPaciente\": {{ idPaciente }},\n  \"idProfissional\": {{ idProfissional }},\n  \"dataHoraConsulta\": \"2025-11-20T14:00:00Z\",\n  \"tipoConsulta\": \"Presencial\",\n  \"observacoes\": \"Consulta de rotina\"\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_consultas_list",
      "_type": "request",
      "parentId": "fld_consultas",
      "name": "GET /api/Consultas",
      "description": "Lista consultas.\n\nAuth: qualquer perfil autenticado.\nRespostas: 200 OK, com escopo conforme perfil (ADMIN: todas; PROFISSIONAL: suas; PACIENTE: suas).",
      "method": "GET",
      "url": "{{ base_url }}/api/Consultas",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },
    {
      "_id": "req_consultas_get",
      "_type": "request",
      "parentId": "fld_consultas",
      "name": "GET /api/Consultas/{id}",
      "description": "Detalha uma consulta.\n\nAuth: qualquer perfil autenticado com acesso àquela consulta.\nRespostas: 200 OK; 404 se não encontrada.",
      "method": "GET",
  "url": "{{ base_url }}/api/Consultas/1",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },
    {
      "_id": "req_consultas_put",
      "_type": "request",
      "parentId": "fld_consultas",
      "name": "PUT /api/Consultas/{id}",
      "description": "Atualiza uma consulta.\n\nCampos: dataHora, tipoConsulta, statusConsulta, observacoes.\nRegras: evita conflitos de horário; PACIENTE apenas cancela a própria.\nRespostas: 200 OK; 400/403/409/404 conforme regras.",
      "method": "PUT",
  "url": "{{ base_url }}/api/Consultas/1",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"dataHoraConsulta\": \"2025-11-20T15:00:00Z\",\n  \"tipoConsulta\": \"Retorno\",\n  \"statusConsulta\": \"Remarcada\",\n  \"observacoes\": \"Ajuste de horário\"\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_consultas_delete",
      "_type": "request",
      "parentId": "fld_consultas",
      "name": "DELETE /api/Consultas/{id}",
      "description": "Exclui uma consulta.\n\nAuth: conforme regras do sistema (geralmente ADMIN/PROFISSIONAL).\nRespostas: 204 No Content; 404 se não encontrada.",
      "method": "DELETE",
      "url": "{{ base_url }}/api/Consultas/1",
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" }
      ]
    },
    {
      "_id": "req_register_paciente_dup",
      "_type": "request",
      "parentId": "fld_auth",
      "name": "Register - Paciente (CPF/RG duplicados - 409)",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/register",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"paciente2@sghss.local\",\n  \"senha\": \"Paciente@123\",\n  \"perfil\": \"PACIENTE\",\n  \"pacienteData\": {\n    \"nomeCompleto\": \"Paciente Dois\",\n    \"dataNascimento\": \"2001-02-02\",\n    \"cpf\": \"12345678900\",\n    \"telefone\": \"11933334444\",\n    \"endereco\": \"Rua B, 200\",\n    \"historicoClinico\": \"N/A\",\n    \"rg\": \"1111111\",\n    \"sexo\": \"F\",\n    \"convenio\": \"Amil\",\n    \"emailPaciente\": \"paciente2@dominio.com\"\n  }\n}"
      },
      "headers": [
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_register_profissional_dup",
      "_type": "request",
      "parentId": "fld_auth",
      "name": "Register - Profissional (CPF/RG duplicados - 409)",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/register",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"pro2@sghss.local\",\n  \"senha\": \"Pro@123\",\n  \"perfil\": \"PROFISSIONAL\",\n  \"profissionalData\": {\n    \"nomeCompleto\": \"Dr. Bruno\",\n    \"cpf\": \"98765432100\",\n    \"rg\": \"SP1234567\",\n    \"crmOuConselho\": \"CRM-8888\",\n    \"especialidade\": \"Ortopedia\",\n    \"telefone\": \"11955556666\",\n    \"emailProfissional\": \"bruno@clinic.com\",\n    \"disponibilidadeAgenda\": \"Seg-Sex 08-17h\"\n  }\n}"
      },
      "headers": [
        { "name": "Content-Type", "value": "application/json" }
      ]
    }
    ,
    {
      "_id": "fld_relacoes",
      "_type": "request_group",
      "parentId": "wrk_sghss",
      "name": "Relacoes"
    },
    {
      "_id": "req_relacoes_ativar",
      "_type": "request",
      "parentId": "fld_relacoes",
      "name": "POST /api/Relacoes/ativar",
      "description": "Ativa (ou cria) a relação entre profissional e paciente.\n\nAuth: ADMIN.\nBody: idProfissional, idPaciente.\nRespostas: 200 OK com relação.",
      "method": "POST",
      "url": "{{ base_url }}/api/Relacoes/ativar",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"idProfissional\": {{ idProfissional }},\n  \"idPaciente\": {{ idPaciente }}\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_relacoes_inativar",
      "_type": "request",
      "parentId": "fld_relacoes",
      "name": "PUT /api/Relacoes/inativar",
      "description": "Inativa a relação entre profissional e paciente.\n\nAuth: ADMIN.\nBody: idProfissional, idPaciente.\nRespostas: 200 OK; 404 se não existir relação.",
      "method": "PUT",
      "url": "{{ base_url }}/api/Relacoes/inativar",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"idProfissional\": {{ idProfissional }},\n  \"idPaciente\": {{ idPaciente }}\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    }
  ]
}
