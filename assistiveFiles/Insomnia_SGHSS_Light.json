{
  "_type": "export",
  "__export_format": 4,
  "__export_date": "2025-10-21T22:35:00.000Z",
  "__export_source": "insomnia.desktop.app:generated",
  "resources": [
    {
      "_id": "wrk_sghss_light",
      "_type": "workspace",
      "name": "SGHSS API (Light)",
      "scope": "collection",
      "description": "Coleção enxuta com os principais endpoints documentados. Inclui descrições dos campos e respostas esperadas."
    },
    {
      "_id": "env_sghss_light",
      "_type": "environment",
      "parentId": "wrk_sghss_light",
      "name": "Base Environment",
      "data": {
        "base_url": "https://localhost:7098",
        "jwt_token": ""
      }
    },

    { "_id": "fld_auth_light", "_type": "request_group", "parentId": "wrk_sghss_light", "name": "Auth" },

    {
      "_id": "req_login_light",
      "_type": "request",
      "parentId": "fld_auth_light",
      "name": "Login",
      "description": "Autentica o usuário e retorna um JWT.\n\nBody:\n- email (string, obrigatório)\n- senha (string, obrigatório)\n\nRespostas:\n- 200 OK: { token, idUsuario, email, perfil }\n- 400/401: credenciais inválidas.",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/login",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"admin@sghss.local\",\n  \"senha\": \"Admin@123\"\n}"
      },
      "headers": [ { "name": "Content-Type", "value": "application/json" } ]
    },

    {
      "_id": "req_register_paciente_light",
      "_type": "request",
      "parentId": "fld_auth_light",
      "name": "Register - Paciente",
      "description": "Cria usuário PACIENTE e retorna JWT.\n\nBody:\n- email, senha, perfil=PACIENTE\n- pacienteData: nomeCompleto, dataNascimento, cpf (somente dígitos), rg, sexo, [telefone], [endereco], [historicoClinico], [convenio], [emailPaciente]\n\nRegras:\n- CPF validado e único entre pacientes (409)\n- RG único entre pacientes (409)\n\nRespostas:\n- 200 OK: { token, idUsuario, email, perfil }\n- 400 CPF inválido | 409 duplicidade.",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/register",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"pac1@sghss.local\",\n  \"senha\": \"Paciente@123\",\n  \"perfil\": \"PACIENTE\",\n  \"pacienteData\": {\n    \"nomeCompleto\": \"Paciente Light\",\n    \"dataNascimento\": \"2000-01-01\",\n    \"cpf\": \"12345678900\",\n    \"rg\": \"RG123\",\n    \"sexo\": \"M\",\n    \"emailPaciente\": \"paciente.light@dominio.com\"\n  }\n}"
      },
      "headers": [ { "name": "Content-Type", "value": "application/json" } ]
    },

    {
      "_id": "req_register_profissional_light",
      "_type": "request",
      "parentId": "fld_auth_light",
      "name": "Register - Profissional",
      "description": "Cria usuário PROFISSIONAL e retorna JWT.\n\nBody:\n- email, senha, perfil=PROFISSIONAL\n- profissionalData: nomeCompleto, cpf, rg, crmOuConselho, especialidade, [telefone], [emailProfissional], [disponibilidadeAgenda]\n\nRegras:\n- CPF validado e único entre profissionais (409)\n- RG único entre profissionais (409)\n- CRM/Conselho único (409)\n\nRespostas:\n- 200 OK: { token, idUsuario, email, perfil }\n- 400 CPF inválido | 409 duplicidade.",
      "method": "POST",
      "url": "{{ base_url }}/api/Auth/register",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"email\": \"pro1@sghss.local\",\n  \"senha\": \"Pro@123\",\n  \"perfil\": \"PROFISSIONAL\",\n  \"profissionalData\": {\n    \"nomeCompleto\": \"Dr(a). Light\",\n    \"cpf\": \"98765432100\",\n    \"rg\": \"SP123\",\n    \"crmOuConselho\": \"CRM-9999\",\n    \"especialidade\": \"Clínico Geral\"\n  }\n}"
      },
      "headers": [ { "name": "Content-Type", "value": "application/json" } ]
    },

    { "_id": "fld_pacientes_light", "_type": "request_group", "parentId": "wrk_sghss_light", "name": "Pacientes" },

    {
      "_id": "req_pacientes_list_light",
      "_type": "request",
      "parentId": "fld_pacientes_light",
      "name": "GET /api/Pacientes",
      "description": "Lista pacientes.\n\nAuth: qualquer perfil autenticado.\nRespostas:\n- 200 OK: array de pacientes com EmailUsuario e EmailPaciente.",
      "method": "GET",
      "url": "{{ base_url }}/api/Pacientes",
      "headers": [ { "name": "Authorization", "value": "Bearer {{ jwt_token }}" } ]
    },
    {
      "_id": "req_pacientes_put_light",
      "_type": "request",
      "parentId": "fld_pacientes_light",
      "name": "PUT /api/Pacientes/{id}",
  "description": "Atualiza dados do paciente.\n\nAuth: PACIENTE pode atualizar parcialmente seus dados (exceto histórico e convênio); PROFISSIONAL só pode atualizar se houver RELAÇÃO ATIVA com o paciente; ADMIN pode alterar campos restritos.\nObservação: a relação é criada/reativada automaticamente ao criar uma consulta entre o par, e também pode ser gerenciada via /api/Relacoes (ADMIN).\nCampos aceitos: nomeCompleto, dataNascimento, cpf, telefone, endereco, historicoClinico (restrito), rg, sexo, convenio (restrito), emailPaciente.\nRegras: CPF válido e único entre pacientes (409); RG único entre pacientes (409).\nRespostas: 200 OK com objeto atualizado; 403/409/400 conforme regras.",
      "method": "PUT",
      "url": "{{ base_url }}/api/Pacientes/1",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"cpf\": \"12345678900\",\n  \"emailPaciente\": \"paciente.light@update.com\"\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },

    { "_id": "fld_profissionais_light", "_type": "request_group", "parentId": "wrk_sghss_light", "name": "Profissionais" },

    {
      "_id": "req_profissionais_list_light",
      "_type": "request",
      "parentId": "fld_profissionais_light",
      "name": "GET /api/Profissionais",
      "description": "Lista profissionais.\n\nAuth: qualquer perfil autenticado.\nRespostas: 200 OK.",
      "method": "GET",
      "url": "{{ base_url }}/api/Profissionais",
      "headers": [ { "name": "Authorization", "value": "Bearer {{ jwt_token }}" } ]
    },
    {
      "_id": "req_profissionais_put_light",
      "_type": "request",
      "parentId": "fld_profissionais_light",
      "name": "PUT /api/Profissionais/{id}",
      "description": "Atualiza dados do profissional.\n\nAuth: ADMIN pode atualizar qualquer; PROFISSIONAL apenas o próprio.\nCampos aceitos: nomeCompleto, cpf, rg, crmOuConselho, especialidade, telefone, emailProfissional, disponibilidadeAgenda.\nRegras: CPF válido e único entre profissionais (409); RG único; CRM/Conselho único.\nRespostas: 200 OK; 403/409/400 conforme regras.",
      "method": "PUT",
      "url": "{{ base_url }}/api/Profissionais/1",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"cpf\": \"98765432100\",\n  \"rg\": \"SP123\"\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },

    { "_id": "fld_consultas_light", "_type": "request_group", "parentId": "wrk_sghss_light", "name": "Consultas" },

    {
      "_id": "req_consultas_create_light",
      "_type": "request",
      "parentId": "fld_consultas_light",
      "name": "POST /api/Consultas",
      "description": "Cria uma consulta.\n\nBody: pacienteId, profissionalId, dataHora (ISO), tipoConsulta, [observacoes].\nRespostas: 200 OK com consulta criada ou validações.\nObservação: exige autenticação e regras de autorização conforme perfil.",
      "method": "POST",
      "url": "{{ base_url }}/api/Consultas",
      "body": {
        "mimeType": "application/json",
        "text": "{\n  \"pacienteId\": 1,\n  \"profissionalId\": 1,\n  \"dataHora\": \"2025-10-22T14:00:00\",\n  \"tipoConsulta\": \"Rotina\"\n}"
      },
      "headers": [
        { "name": "Authorization", "value": "Bearer {{ jwt_token }}" },
        { "name": "Content-Type", "value": "application/json" }
      ]
    },
    {
      "_id": "req_consultas_list_light",
      "_type": "request",
      "parentId": "fld_consultas_light",
      "name": "GET /api/Consultas",
      "description": "Lista consultas. Requer JWT. Resposta 200 OK.",
      "method": "GET",
      "url": "{{ base_url }}/api/Consultas",
      "headers": [ { "name": "Authorization", "value": "Bearer {{ jwt_token }}" } ]
    }
    ,
    {
      "_id": "res_login_200_light",
      "_type": "response",
      "parentId": "req_login_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"token\": \"<jwt>\",\n  \"idUsuario\": 1,\n  \"email\": \"admin@sghss.local\",\n  \"perfil\": \"ADMIN\"\n}"
    },
    {
      "_id": "res_login_401_light",
      "_type": "response",
      "parentId": "req_login_light",
      "statusCode": 401,
      "statusMessage": "Unauthorized",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Credenciais inválidas\"\n}"
    },

    {
      "_id": "res_reg_pac_200_light",
      "_type": "response",
      "parentId": "req_register_paciente_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"token\": \"<jwt>\",\n  \"idUsuario\": 10,\n  \"email\": \"pac1@sghss.local\",\n  \"perfil\": \"PACIENTE\"\n}"
    },
    {
      "_id": "res_reg_pac_400_light",
      "_type": "response",
      "parentId": "req_register_paciente_light",
      "statusCode": 400,
      "statusMessage": "Bad Request",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Informe um CPF válido.\"\n}"
    },
    {
      "_id": "res_reg_pac_409_light",
      "_type": "response",
      "parentId": "req_register_paciente_light",
      "statusCode": 409,
      "statusMessage": "Conflict",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Já existe paciente cadastrado com o mesmo CPF.\"\n}"
    },

    {
      "_id": "res_reg_prof_200_light",
      "_type": "response",
      "parentId": "req_register_profissional_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"token\": \"<jwt>\",\n  \"idUsuario\": 20,\n  \"email\": \"pro1@sghss.local\",\n  \"perfil\": \"PROFISSIONAL\"\n}"
    },
    {
      "_id": "res_reg_prof_409_light",
      "_type": "response",
      "parentId": "req_register_profissional_light",
      "statusCode": 409,
      "statusMessage": "Conflict",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Já existe profissional cadastrado com o mesmo CPF.\"\n}"
    },

    {
      "_id": "res_pac_list_200_light",
      "_type": "response",
      "parentId": "req_pacientes_list_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "[\n  {\n    \"idPaciente\": 1,\n    \"nomeCompleto\": \"Paciente Light\",\n    \"emailUsuario\": \"pac1@sghss.local\",\n    \"emailPaciente\": \"paciente.light@dominio.com\"\n  }\n]"
    },
    {
      "_id": "res_pac_put_200_light",
      "_type": "response",
      "parentId": "req_pacientes_put_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"idPaciente\": 1,\n  \"emailPaciente\": \"paciente.light@update.com\"\n}"
    },
    {
      "_id": "res_pac_put_403_light",
      "_type": "response",
      "parentId": "req_pacientes_put_light",
      "statusCode": 403,
      "statusMessage": "Forbidden",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Usuário sem permissão para realizar essa ação.\"\n}"
    },
    {
      "_id": "res_pac_put_409_light",
      "_type": "response",
      "parentId": "req_pacientes_put_light",
      "statusCode": 409,
      "statusMessage": "Conflict",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Já existe paciente cadastrado com o mesmo CPF.\"\n}"
    },

    {
      "_id": "res_prof_list_200_light",
      "_type": "response",
      "parentId": "req_profissionais_list_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "[\n  {\n    \"idProfissional\": 1,\n    \"nomeCompleto\": \"Dr(a). Light\"\n  }\n]"
    },
    {
      "_id": "res_prof_put_200_light",
      "_type": "response",
      "parentId": "req_profissionais_put_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"idProfissional\": 1,\n  \"cpf\": \"98765432100\",\n  \"rg\": \"SP123\"\n}"
    },
    {
      "_id": "res_prof_put_409_light",
      "_type": "response",
      "parentId": "req_profissionais_put_light",
      "statusCode": 409,
      "statusMessage": "Conflict",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Já existe profissional cadastrado com o mesmo RG.\"\n}"
    },

    {
      "_id": "res_cons_create_200_light",
      "_type": "response",
      "parentId": "req_consultas_create_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"idConsulta\": 1,\n  \"pacienteId\": 1,\n  \"profissionalId\": 1,\n  \"dataHoraConsulta\": \"2025-10-22T14:00:00\",\n  \"tipoConsulta\": \"Rotina\",\n  \"statusConsulta\": \"Agendada\"\n}"
    },
    {
      "_id": "res_cons_create_403_light",
      "_type": "response",
      "parentId": "req_consultas_create_light",
      "statusCode": 403,
      "statusMessage": "Forbidden",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Usuário sem permissão para agendar consulta para outro paciente.\"\n}"
    },
    {
      "_id": "res_cons_create_409_light",
      "_type": "response",
      "parentId": "req_consultas_create_light",
      "statusCode": 409,
      "statusMessage": "Conflict",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "{\n  \"message\": \"Já existe consulta para esse horário.\"\n}"
    },

    {
      "_id": "res_cons_list_200_light",
      "_type": "response",
      "parentId": "req_consultas_list_light",
      "statusCode": 200,
      "statusMessage": "OK",
      "headers": [ { "name": "content-type", "value": "application/json" } ],
      "body": "[\n  { \n    \"idConsulta\": 1, \n    \"tipoConsulta\": \"Rotina\" \n  }\n]"
    }
  ]
}
